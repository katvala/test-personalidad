<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <title>Resultados del Test</title>
    <!-- Bootstrap 5 CSS (CDN) -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeo5TUbXcRVXpSl0QVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="/static/style.css" />
  </head>
  <body class="bg-light">
    <div class="container py-4">
      <div class="row justify-content-center">
        <div class="col-md-8">
          <div class="card border-success mb-4">
            <div class="card-header bg-success text-white">
              <h5 class="mb-0">Tu Perfil Psicológico</h5>
            </div>
            <div class="card-body">
              <!-- SECCIÓN NUMÉRICA FILTRADA: solo valores altos (>3.5) + dominantes -->
              <ul class="list-group list-group-flush mb-3">
                {% set any_altos = false %} {% for clave, valor in
                interpretacion.items() %} {% if (clave in
                ["Maquiavelismo","Narcisismo","Psicopatía"] and valor > 3.5) or
                (clave in ["Apego Ansioso","Apego Evitativo","Apego
                Desorganizado"] and valor > 3.5) %}
                <li class="list-group-item d-flex justify-content-between">
                  <span>{{ clave }}:</span>
                  <strong>{{ valor }}</strong>
                </li>
                {% set any_altos = true %} {% endif %} {% endfor %} {% if not
                any_altos %}
                <li class="list-group-item text-success">
                  Ninguna puntuación alta detectada (>3.5/5). ¡Buen trabajo!
                  Esto indica un perfil psicológico equilibrado.
                </li>
                {% endif %}

                <!-- Siempre mostrar dominantes -->
                <li class="list-group-item d-flex justify-content-between">
                  <span>Estilo de Apego Dominante:</span>
                  <strong
                    >{{ interpretacion["Estilo de Apego Dominante"] }}</strong
                  >
                </li>
                <li class="list-group-item d-flex justify-content-between">
                  <span>Triada Oscura Dominante:</span>
                  <strong>{{ interpretacion["Triada Dominante"] }}</strong>
                </li>
              </ul>

              <!-- SECCIÓN DE INTERPRETACIONES AGRUPADAS -->

              <!-- Sección de Rasgos de Personalidad -->
              <div class="card mb-3">
                <div class="card-header bg-warning">
                  <strong>Rasgos de Personalidad (Triada Oscura)</strong>
                </div>
                <div class="card-body">
                  {% for tipo in ["Maquiavelismo Elevado", "Maquiavelismo
                  Moderado", "Maquiavelismo Bajo", "Narcisismo Elevado",
                  "Narcisismo Moderado", "Narcisismo Bajo", "Psicopatía
                  Elevada", "Psicopatía Moderada", "Psicopatía Baja"] %} {% if
                  tipo in interpretacion_texto %}
                  <p>
                    <strong>{{ tipo }}:</strong> {{ interpretacion_texto[tipo]
                    }}
                  </p>
                  {% endif %} {% endfor %}
                </div>
              </div>

              <!-- Sección de Estilos de Apego -->
              <div class="card mb-3">
                <div class="card-header bg-info">
                  <strong>Estilos de Apego</strong>
                </div>
                <div class="card-body">
                  {% for tipo in ["Apego Seguro Elevado", "Apego Seguro
                  Moderado", "Apego Ansioso Elevado", "Apego Ansioso Moderado",
                  "Apego Evitativo Elevado", "Apego Evitativo Moderado", "Apego
                  Desorganizado Elevado", "Apego Desorganizado Moderado"] %} {%
                  if tipo in interpretacion_texto %}
                  <p>
                    <strong>{{ tipo }}:</strong> {{ interpretacion_texto[tipo]
                    }}
                  </p>
                  {% endif %} {% endfor %}
                </div>
              </div>

              {% if "Perfil Equilibrado" in interpretacion_texto %}
              <div class="card mb-3">
                <div class="card-header bg-success text-white">
                  <strong>Perfil Equilibrado</strong>
                </div>
                <div class="card-body">
                  <p>{{ interpretacion_texto["Perfil Equilibrado"] }}</p>
                </div>
              </div>
              {% endif %}

              <!-- Descripción General de Personalidad -->
              <div class="card mb-3">
                <div class="card-header bg-primary text-white">
                  <strong>Descripción General de tu Personalidad</strong>
                </div>
                <div class="card-body">
                  <p>
                    {{ interpretacion_texto["Descripción de tu Personalidad"] }}
                  </p>
                </div>
              </div>

              <!-- Resumen de Puntuaciones -->
              <div class="card mb-3">
                <div class="card-header bg-info text-white">
                  <strong>Resumen de tus Puntuaciones</strong>
                </div>
                <div class="card-body">
                  <pre class="mb-0">
{{ interpretacion_texto["Tus Puntuaciones"] }}</pre
                  >
                </div>
              </div>

              <!-- Cartel final para Dominantes y Mensaje de Apoyo -->
              <div class="card mb-3">
                <div class="card-body">
                  <p>
                    <strong>Estilo de Apego Dominante:</strong> {{
                    interpretacion_texto["Estilo de Apego Dominante"] }}
                  </p>
                  <p>
                    <strong>Triada Oscura Dominante:</strong> {{
                    interpretacion_texto["Triada Oscura Dominante"] }}
                  </p>
                  <hr />
                  <p>
                    <strong>Mensaje de Apoyo:</strong> {{
                    interpretacion_texto["Mensaje de Apoyo"] }}
                  </p>
                </div>
              </div>

              <a href="/" class="btn btn-secondary mt-3">Volver al inicio</a>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- Bootstrap JS (CDN) -->
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ENjdO4Dr2bkBIFxQpeo5TUbXcRVXpSl0QVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
